webpackJsonp([0],{711:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=t.params.hash;return Object.assign({hash:n,urls:(0,M.selectContentUrls)(e,n),consensus:(0,M.selectContentConsensus)(e,n),metadata:(0,M.selectContentMetadata)(e,n)},t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(7),c=a(i),d=n(169),f=n(729),p=a(f),E=n(733),T=a(E),y=n(378),h=a(y),m=n(724),b=(a(m),n(721)),C=a(b),_=n(380),A=a(_),v=n(735),S=a(v),N=n(727),M=n(725),O=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={tab:"metadata"},["handleSetTab"].forEach(function(e){n[e]=n[e].bind(n)}),n}return u(t,e),s(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){}},{key:"handleSetTab",value:function(e){var t=this.props.hash;switch(e){case"consensus":this.props.loadContentConsensus(t);break;case"metadata":this.props.loadContentMetadata(t);break;case"urls":this.props.loadContentUrls(t);break;case"history":}this.setState({tab:e})}},{key:"renderCurrentTab",value:function(){var e=this.state.tab;switch(e){case"consensus":return c.default.createElement(p.default,{data:this.props.consensus});case"metadata":return c.default.createElement(S.default,{subjectHash:this.props.hash});case"urls":return c.default.createElement(h.default,{data:this.props.urls,component:A.default});case"history":return c.default.createElement(h.default,{data:this.props.history,component:T.default});default:return}}},{key:"render",value:function(){var e=this.props.hash,t=this.state.tab;return c.default.createElement("div",{id:"content",className:"container"},c.default.createElement("div",{className:"row"},c.default.createElement("header",{className:"yellow col-md-12"},c.default.createElement("hr",{className:"yellow"}),c.default.createElement("label",null,"Content"),c.default.createElement("h5",null,e))),c.default.createElement(C.default,{value:t,tabs:["consensus","metadata","urls","history"],onChange:this.handleSetTab}),this.renderCurrentTab())}}]),t}(c.default.Component);O.propTypes={hash:i.PropTypes.string.isRequired,consensus:i.PropTypes.object.isRequired,urls:i.PropTypes.array,history:i.PropTypes.array,loadContentUrls:i.PropTypes.func.isRequired,loadContentMetadata:i.PropTypes.func.isRequired,loadContentConsensus:i.PropTypes.func.isRequired},O.defaultProps={consensus:{}},t.default=(0,d.connect)(l,{loadContentConsensus:N.loadContentConsensus,loadContentMetadata:N.loadContentMetadata,loadContentUrls:N.loadContentUrls})(O)},718:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(7),i=a(s),c=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.name,a=e.type,r=e.showError,o=e.error,u=e.value,l=e.placeholder,s=e.onChange;return i.default.createElement("div",{className:o&&r?"validFormField form-group has-error":"validFormField form-group"},t?i.default.createElement("label",{className:"control-label",htmlFor:n},t):void 0,i.default.createElement("input",{id:n,name:n,type:a,className:"form-control",value:u,placeholder:l,onChange:function(e){s(n,e.target.value,e)}}),""!=o&&r?i.default.createElement("div",{className:"control-label"},o):void 0)}}]),t}(i.default.Component);t.default=c,c.propTypes={name:s.PropTypes.string.isRequired,label:s.PropTypes.string,type:s.PropTypes.string.isRequired,value:s.PropTypes.string.isRequired,placeholder:s.PropTypes.string,error:s.PropTypes.string,showError:s.PropTypes.bool,onChange:s.PropTypes.func.isRequired},c.defaultProps={name:void 0,type:"text",error:void 0,showError:!0,placeholder:""}},720:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(7),i=a(s),c=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.name,a=e.type,r=e.showError,o=e.error,u=e.value,l=e.placeholder,s=e.onChange;return i.default.createElement("div",{className:o&&r?"validFormField form-group has-error":"validFormField form-group"},t?i.default.createElement("label",{htmlFor:n},t):void 0,i.default.createElement("textarea",{id:n,name:n,type:a,className:"form-control",value:u,placeholder:l,onChange:function(e){s(n,e.target.value,e)}}),""!=o&&r?i.default.createElement("div",{className:"control-label"},o):void 0)}}]),t}(i.default.Component);t.default=c,c.propTypes={name:s.PropTypes.string.isRequired,label:s.PropTypes.string,type:s.PropTypes.string.isRequired,value:s.PropTypes.string.isRequired,placeholder:s.PropTypes.string,error:s.PropTypes.string,showError:s.PropTypes.bool,onChange:s.PropTypes.func.isRequired},c.defaultProps={name:void 0,type:"text",error:void 0,showError:!0,placeholder:""}},721:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=a(r),u=function(e){var t=e.tabs,n=e.value,a=e.onChange,r=function(e){return function(){a(e)}};return o.default.createElement("div",{className:"tab bar row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement("hr",{className:"green"}),t.map(function(e,t){return o.default.createElement("a",{className:n==e?"current tab":"tab",onClick:r(e),key:t},e)}),o.default.createElement("hr",{className:"green"})))};u.propTypes={tabs:r.PropTypes.array.isRequired,value:r.PropTypes.string.isRequired,onChange:r.PropTypes.func.isRequired},t.default=u},724:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),s=n(7),i=a(s),c=(n(52),function(e){function t(e){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return u(t,e),l(t,[{key:"handleClickTitle",value:function(){}},{key:"render",value:function(){var e=this.props.metadata;return i.default.createElement("div",{className:"metadata"},Object.keys(e).map(function(t){return"subjectHash"==t||"userId"==t||"requestId"==t?i.default.createElement("div",{key:t}):i.default.createElement("div",{key:t},i.default.createElement("label",null,t),i.default.createElement("p",null,e[t]))}))}}]),t}(s.Component));t.default=c,c.propTypes={metadata:i.default.PropTypes.object},c.defaultProps={};var d=function(e){var t=e.key;return i.default.createElement("div",{className:"key"},t)};d.propTypes={key:s.PropTypes.string.isRequired}},725:function(e,t,n){"use strict";function a(e,t){return e.entities.content[t]}function r(e,t){return e.entities.consensus[t]}function o(e,t){var n=e.entities.urls;return Object.keys(n).filter(function(e){return n[e].hash==t}).map(function(e){return n[e]})}function u(e,t){var n=e.entities.metadata;return Object.keys(n).filter(function(e){return n[e].subject==t}).map(function(e){return n[e]})}Object.defineProperty(t,"__esModule",{value:!0}),t.selectContent=a,t.selectContentConsensus=r,t.selectContentUrls=o,t.selectContentMetadata=u},726:function(e,t,n){"use strict";function a(e,t){return e+"."+t}function r(e,t,n){return e.locals.metadata[a(t,n)]}function o(e,t,n){return e.entities.metadata[a(t,n)]}Object.defineProperty(t,"__esModule",{value:!0}),t.metadataId=a,t.selectLocalMetadata=r,t.selectMetadata=o},727:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return r({},p.CALL_API,{types:[h,m,b],endpoint:"/content/"+e,schema:T.default.CONTENT,data:{hash:e}})}function u(e){return function(t,n){return(0,y.selectContent)(n(),e)?null:t(o(e))}}function l(e){return r({},p.CALL_API,{types:[C,_,A],endpoint:"/consensus/"+e,schema:T.default.CONSENSUS,data:{hash:e}})}function s(e){return function(t,n){return(0,y.selectContentConsensus)(n(),e)?null:t(l(e))}}function i(e){return r({},p.CALL_API,{types:[v,S,N],endpoint:"/metadata/"+e,schema:T.default.METADATA_ARRAY,data:{hash:e}})}function c(e){return function(t,n){return(0,y.selectContentMetadata)(n(),e).length?null:t(i(e))}}function d(e){return r({},p.CALL_API,{types:[M,O,P],endpoint:"/content/"+e+"/urls",schema:T.default.URL_ARRAY,data:{hash:e}})}function f(e){return function(t,n){return(0,y.selectContentUrls)(n(),e).length?null:t(d(e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.CONTENT_URLS_FAILURE=t.CONTENT_URLS_SUCCESS=t.CONTENT_URLS_REQUEST=t.CONTENT_METADATA_FAILURE=t.CONTENT_METADATA_SUCCESS=t.CONTENT_METADATA_REQUEST=t.CONTENT_CONSENSUS_FAILURE=t.CONTENT_CONSENSUS_SUCCESS=t.CONTENT_CONSENSUS_REQUEST=t.CONTENT_FAILURE=t.CONTENT_SUCCESS=t.CONTENT_REQUEST=void 0,t.fetchContent=o,t.loadContent=u,t.fetchContentConsensus=l,t.loadContentConsensus=s,t.fetchContentMetadata=i,t.loadContentMetadata=c,t.fetchContentUrls=d,t.loadContentUrls=f;var p=n(97),E=n(98),T=a(E),y=n(725),h=t.CONTENT_REQUEST="CONTENT_REQUEST",m=t.CONTENT_SUCCESS="CONTENT_SUCCESS",b=t.CONTENT_FAILURE="CONTENT_FAILURE",C=t.CONTENT_CONSENSUS_REQUEST="CONTENT_CONSENSUS_REQUEST",_=t.CONTENT_CONSENSUS_SUCCESS="CONTENT_CONSENSUS_SUCCESS",A=t.CONTENT_CONSENSUS_FAILURE="CONTENT_CONSENSUS_FAILURE",v=t.CONTENT_METADATA_REQUEST="CONTENT_METADATA_REQUEST",S=t.CONTENT_METADATA_SUCCESS="CONTENT_METADATA_SUCCESS",N=t.CONTENT_METADATA_FAILURE="CONTENT_METADATA_FAILURE",M=t.CONTENT_URLS_REQUEST="CONTENT_URLS_REQUEST",O=t.CONTENT_URLS_SUCCESS="CONTENT_URLS_SUCCESS",P=t.CONTENT_URLS_FAILURE="CONTENT_URLS_FAILURE"},728:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return(0,y.newLocalModel)(E.default.METADATA,m,Object.assign({},h,{userId:e,subjectHash:t}))}function u(e){return(0,y.editModel)(E.default.METADATA,b,Object.assign({},h,e))}function l(e){return(0,y.removeLocalModel)(E.default.METADATA,C,(0,T.metadataId)(e))}function s(e){return(0,y.updateLocalModel)(E.default.METADATA,_,e)}function i(e,t){return r({},f.CALL_API,{types:[A,v,S],endpoint:"/metadata/"+e+"/"+t,schema:E.default.METADATA,data:{userId:e,subjectHash:t}})}function c(e,t){var n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return function(a,r){var o=(0,T.selectMetadata)(r(),e,t);return o&&n.every(function(e){return Object.prototype.hasOwnProperty(o,e)})?null:a(i(e,t,n))}}function d(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(t){return t(r({},f.CALL_API,{types:[N,M,O],schema:E.default.METADATA,endpoint:"/metadata",data:e})).then(function(t){console.log("huh?"),l(e.userId,e.subjectHash)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.METADATA_SAVE_FAILURE=t.METADATA_SAVE_SUCCESS=t.METADATA_SAVE_REQUEST=t.METADATA_FAILURE=t.METADATA_SUCCESS=t.METADATA_REQUEST=void 0,t.newMetadata=o,t.editMetadata=u,t.cancelMetadataEdit=l,t.updateMetadata=s,t.fetchMetadata=i,t.loadMetadata=c,t.saveMetadata=d;var f=n(97),p=n(98),E=a(p),T=n(726),y=n(381),h={title:"",description:""},m="METADATA_NEW",b="METADATA_EDIT",C="METADATA_CANCEL_EDIT",_="METADATA_UPDATE",A=t.METADATA_REQUEST="METADATA_REQUEST",v=t.METADATA_SUCCESS="METADATA_SUCCESS",S=t.METADATA_FAILURE="METADATA_FAILURE",N=t.METADATA_SAVE_REQUEST="METADATA_SAVE_REQUEST",M=t.METADATA_SAVE_SUCCESS="METADATA_SAVE_SUCCESS",O=t.METADATA_SAVE_FAILURE="METADATA_SAVE_FAILURE"},729:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=a(r),u=function(e){var t=e.data,n=e.onClickKey;return o.default.createElement("div",{className:"consensus"},Object.keys(t).map(function(e){return o.default.createElement("div",{key:e},o.default.createElement("p",{className:"key",onClick:n},e))}))};u.propTypes={data:r.PropTypes.object.isRequired,onClickKey:r.PropTypes.func},u.defaultProps={onClickKey:function(){}},t.default=u},730:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=a(r),u=n(718),l=a(u),s=n(720),i=a(s),c=function(e){var t=e.metadata,n=e.onChange,a=e.onCancel,r=e.onSubmit,u=function(e){e.preventDefault(),r(t,e)},s=function(e){e.preventDefault(),a(e)};return o.default.createElement("form",{className:"metadata row",onSubmit:u},o.default.createElement("div",{className:"col-md-12"},o.default.createElement(l.default,{name:"title",label:"title",value:t.title,onChange:n}),o.default.createElement(i.default,{name:"description",label:"description",value:t.description,onChange:n}),o.default.createElement("button",{className:"btn",onClick:s},"Cancel"),o.default.createElement("input",{className:"btn btn-primary",type:"submit",value:"Save"})))};c.propTypes={metadata:r.PropTypes.object.isRequired,onChange:r.PropTypes.func.isRequired,onCancel:r.PropTypes.func.isRequired,onSubmit:r.PropTypes.func.isRequired},t.default=c},733:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=a(r),u=n(52),l=function(e){var t=e.data,n=encodeURIComponent(t.url);return o.default.createElement("div",{className:"user item col-xl-3 col-lg-4 col-md-6 col-sm-12"},o.default.createElement(u.Link,{to:"/url?url="+n},t.url),t.hash?o.default.createElement(u.Link,{to:"/content/"+t.hash},t.hash):void 0)};l.propTypes={data:o.default.PropTypes.object.isRequired},l.defaultProps={},t.default=l},735:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=t.subjectHash;return Object.assign({userId:"user",savedMetadata:(0,m.selectMetadata)(e,"user",n),metadata:(0,m.selectLocalMetadata)(e,"user",n)},t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(7),d=a(c),f=n(169),p=n(724),E=a(p),T=n(730),y=a(T),h=n(728),m=n(726),b=function(e){function t(e){o(this,t);var n=u(this,Object.getPrototypeOf(t).call(this,e));return["handleChange","handleCancel","handleNew","handleEdit","handleSave"].forEach(function(e){n[e]=n[e].bind(n)}),n}return l(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.loadMetadata(this.props.userId,this.props.subjectHash)}},{key:"componentWillReceiveProps",value:function(){}},{key:"handleNew",value:function(){this.props.newMetadata(this.props.userId,this.props.subjectHash)}},{key:"handleEdit",value:function(){this.props.editMetadata(this.props.savedMetadata)}},{key:"handleChange",value:function(e,t){this.props.updateMetadata(Object.assign({},this.props.metadata,r({},e,t)))}},{key:"handleCancel",value:function(){this.props.cancelMetadataEdit(this.props.metadata)}},{key:"handleSave",value:function(e){this.props.saveMetadata(e),this.props.cancelMetadataEdit(this.props.metadata)}},{key:"render",value:function(){var e=this.props,t=e.savedMetadata,n=e.metadata;return t&&!n?d.default.createElement("div",{className:"metadata editor"},d.default.createElement(E.default,{metadata:t}),d.default.createElement("button",{className:"btn btn-primary",onClick:this.handleEdit},"Edit")):n?d.default.createElement("div",{className:"metadata editor"},d.default.createElement(y.default,{metadata:n,onChange:this.handleChange,onCancel:this.handleCancel,onSubmit:this.handleSave})):d.default.createElement("div",{className:"metadata editor"},d.default.createElement("button",{className:"btn btn-primary",onClick:this.handleNew},"Add Metadata"))}}]),t}(d.default.Component);b.propTypes={userId:c.PropTypes.string,subjectHash:c.PropTypes.string.isRequired,metadata:c.PropTypes.object,savedMetadata:c.PropTypes.object,newMetadata:c.PropTypes.func.isRequired,editMetadata:c.PropTypes.func.isRequired,updateMetadata:c.PropTypes.func.isRequired,cancelMetadataEdit:c.PropTypes.func.isRequired,loadMetadata:c.PropTypes.func.isRequired,saveMetadata:c.PropTypes.func.isRequired},b.defaultProps={},t.default=(0,f.connect)(s,{newMetadata:h.newMetadata,editMetadata:h.editMetadata,updateMetadata:h.updateMetadata,cancelMetadataEdit:h.cancelMetadataEdit,loadMetadata:h.loadMetadata,saveMetadata:h.saveMetadata})(b)}});